{% extends "::base.html.twig" %}


{% block main_content %}

{% if app.request.get('_route') != app.request.headers.get('referer') %}
    <input type="hidden" name="_target_path" value="{{ app.request.headers.get('referer') }}" />
{% endif %}

<fieldset>
<legend>Modifier votre point relais favori</legend>
</fieldset>

<div class="col-md-6">
    <div class="form-group">
        <div class="col-md-12 ">
			<p>Point relais favori : </p>
			<p>{{ app.user.dropSpot.fullAdress }}</p>

			{{ form(dropSpotForm, {'attr':{'novalidate': 'novalidate'}}) }}

    </div>

    </div>
</div>

<div class="col-md-6 ">
     <div class="col-md-6 col-md-offset-2">
        <img alt="tintin" src="{{ asset('img/bd-perso/tintin.jpg') }}"></a>
     </div>
 </div>

<div class="col-md-12 ">
<div id="map-container"></div>
</div>

{% endblock %}

{% block javascripts %}
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="https://www.googleapis.com/geolocation/v1/geolocate?key=API_KEY"></script>
<script type="text/javascript">

      function init_map() {
        var var_location = new google.maps.LatLng({{app.user.dropSpot.latitude}},{{app.user.dropSpot.longitude}});

        var var_mapoptions = {
          center: var_location,
          zoom: 14
        };

         var var_map = new google.maps.Map(document.getElementById("map-container"),
            var_mapoptions);


        var var_marker = new google.maps.Marker({
            position: var_location,
            map: var_map,
            title:"Paris"});


        var_marker.setMap(var_map);

      }

      google.maps.event.addDomListener(window, 'load', init_map);

</script>
{% endblock %}
